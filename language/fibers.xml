<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: 376d3f9c2ef7fcd64d8b8503d552013acefb8b5b Maintainer: lacatoire Status: ready -->
<chapter xml:id="language.fibers" xmlns="http://docbook.org/ns/docbook">
 <title>Fiber</title>

 <simplesect xml:id="language.fibers.overview">
  <title>Panoramica sulle Fiber</title>
  <?phpdoc print-version-for="fiber"?>
  <para>
   Le Fiber rappresentano funzioni interrompibili con stack completo. Le Fiber possono essere sospese da qualsiasi punto nello stack delle chiamate,
   mettendo in pausa l'esecuzione all'interno della fiber fino a quando la fiber non viene ripresa in un secondo momento.
  </para>
  <para>
   Le Fiber mettono in pausa l'intero stack di esecuzione, quindi il chiamante diretto della funzione non ha bisogno di cambiare il modo in cui
   invoca la funzione.
  </para>
  <para>
   L'esecuzione può essere interrotta in qualsiasi punto dello stack delle chiamate utilizzando <methodname>Fiber::suspend</methodname>
   (ovvero, la chiamata a <methodname>Fiber::suspend</methodname> può trovarsi in una funzione profondamente annidata oppure non
   esistere affatto).
  </para>
  <para>
   A differenza dei <classname>Generator</classname> senza stack, ogni <classname>Fiber</classname> ha il proprio stack delle chiamate,
   consentendo di metterle in pausa all'interno di chiamate di funzione profondamente annidate. Una funzione che dichiara un punto di interruzione
   (ovvero, che chiama <methodname>Fiber::suspend</methodname>) non ha bisogno di cambiare il proprio tipo di ritorno, a differenza di una funzione che utilizza
   &yield; che deve restituire un'istanza di <classname>Generator</classname>.
  </para>
  <para>
   Le Fiber possono essere sospese in qualsiasi chiamata di funzione, incluse quelle chiamate dall'interno della VM PHP, come le funzioni
   fornite a <function>array_map</function> o i metodi chiamati da &foreach; su un
   oggetto <classname>Iterator</classname>.
  </para>
  <para>
   Una volta sospesa, l'esecuzione della fiber può essere ripresa con qualsiasi valore utilizzando <methodname>Fiber::resume</methodname>
   o lanciando un'eccezione nella fiber utilizzando <methodname>Fiber::throw</methodname>. Il valore viene restituito
   (o l'eccezione viene lanciata) da <methodname>Fiber::suspend</methodname>.
  </para>
  <note>
   <simpara>
    Prima di PHP 8.4.0, il cambio di fiber durante l'esecuzione di un
    <link linkend="language.oop5.decon.destructor">distruttore</link> di oggetto non era
    consentito.
   </simpara>
  </note>

  <example xml:id="language.fiber.example.basic"><!-- {{{ -->
   <title>Utilizzo di base</title>
   <programlisting role="php">
    <![CDATA[
<?php
$fiber = new Fiber(function (): void {
   $value = Fiber::suspend('fiber');
   echo "Value used to resume fiber: ", $value, PHP_EOL;
});

$value = $fiber->start();

echo "Value from fiber suspending: ", $value, PHP_EOL;

$fiber->resume('test');
?>
]]>
   </programlisting>
   &example.outputs;
   <screen>
    <![CDATA[
Value from fiber suspending: fiber
Value used to resume fiber: test
]]>
   </screen>
  </example><!-- }}} -->

 </simplesect>

</chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
