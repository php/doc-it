<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: cdc9d28d334bbc08386fecf8aade66080004a9dd Maintainer: lacatoire Status: ready -->

<sect1 xml:id="control-structures.switch" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>switch</title>
 <?phpdoc print-version-for="switch"?>
 <simpara>
  L'istruzione <literal>switch</literal> è simile a una serie di
  istruzioni IF sulla stessa espressione. In molte occasioni, potrebbe essere
  necessario confrontare la stessa variabile (o espressione) con molti
  valori differenti, ed eseguire un pezzo di codice diverso a seconda
  del valore a cui corrisponde. Questo è esattamente lo scopo
  dell'istruzione <literal>switch</literal>.
 </simpara>
 <note>
  <simpara>
   A differenza di alcuni altri linguaggi, l'istruzione
   <link linkend="control-structures.continue">continue</link>
   si applica a <literal>switch</literal> e agisce in modo simile a <literal>break</literal>. Se
   c'è un <literal>switch</literal> all'interno di un ciclo e si desidera continuare alla prossima iterazione del
   ciclo esterno, utilizzare <literal>continue 2</literal>.
  </simpara>
 </note>
 <note>
  <para>
   switch/case effettua un
   <link linkend="types.comparisions-loose">confronto debole</link>.
  </para>
 </note>

 <para>
  Nell'esempio seguente, ogni blocco di codice è equivalente.
  Uno usa una serie di istruzioni <literal>if</literal> e
  <literal>elseif</literal>, e l'altro un'istruzione
  <literal>switch</literal>. In entrambi i casi, l'output è lo stesso.
  <example>
   <title>Struttura <literal>switch</literal></title>
   <programlisting role="php">
<![CDATA[
<?php
// Questa istruzione switch:

switch ($i) {
    case 0:
        echo "i è uguale a 0";
        break;
    case 1:
        echo "i è uguale a 1";
        break;
    case 2:
        echo "i è uguale a 2";
        break;
}

// È equivalente a:

if ($i == 0) {
    echo "i è uguale a 0";
} elseif ($i == 1) {
    echo "i è uguale a 1";
} elseif ($i == 2) {
    echo "i è uguale a 2";
}
?>
]]>
   </programlisting>
  </example>
 </para>
 <para>
  È importante capire come l'istruzione <literal>switch</literal>
  viene eseguita per evitare errori. L'istruzione
  <literal>switch</literal> esegue riga per riga
  (in realtà, istruzione per istruzione). All'inizio, nessun codice viene
  eseguito. Solo quando viene trovata un'istruzione <literal>case</literal>
  la cui espressione si valuta a un valore che corrisponde al valore
  dell'espressione <literal>switch</literal>, PHP inizia ad eseguire le
  istruzioni. PHP continua ad eseguire le istruzioni fino alla fine
  del blocco <literal>switch</literal>, o fino a quando non incontra
  un'istruzione <literal>break</literal>. Se non viene scritta un'istruzione
  <literal>break</literal> alla fine della lista di istruzioni di un case,
  PHP continuerà ad eseguire le istruzioni del
  case seguente. Ad esempio:
  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
switch ($i) {
    case 0:
        echo "i è uguale a 0";
    case 1:
        echo "i è uguale a 1";
    case 2:
        echo "i è uguale a 2";
}
?>
]]>
   </programlisting>
  </informalexample>
 </para>
 <simpara>
  Qui, se <varname>$i</varname> è uguale a 0, PHP eseguirebbe tutte le istruzioni echo!
  Se <varname>$i</varname> è uguale a 1, PHP eseguirebbe le ultime due
  istruzioni echo. Il comportamento atteso ('i è uguale a 2'
  verrebbe visualizzato) si otterrebbe solo se <varname>$i</varname> è uguale a 2. Pertanto,
  è importante non dimenticare le istruzioni <literal>break</literal>
  (anche se in determinate circostanze si potrebbe intenzionalmente evitare
  di fornirle).
 </simpara>
 <simpara>
  In un'istruzione <literal>switch</literal>, la condizione viene
  valutata una sola volta e il risultato viene confrontato con ogni
  istruzione <literal>case</literal>. In un'istruzione <literal>elseif</literal>,
  la condizione viene valutata nuovamente. Se la condizione è
  più complessa di un semplice confronto e/o si trova in un ciclo intensivo,
  un <literal>switch</literal> può essere più veloce.
 </simpara>
 <para>
  La lista di istruzioni per un case può anche essere vuota, il che
  passa semplicemente il controllo alla lista di istruzioni del case successivo.
  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
switch ($i) {
    case 0:
    case 1:
    case 2:
        echo "i è minore di 3 ma non negativo";
        break;
    case 3:
        echo "i è 3";
}
?>
]]>
   </programlisting>
  </informalexample>
 </para>
 <para>
  Un caso speciale è il case <literal>default</literal>. Questo case corrisponde
  a tutto ciò che non è stato soddisfatto dagli altri case. Ad esempio:
  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
switch ($i) {
    case 0:
        echo "i è uguale a 0";
        break;
    case 1:
        echo "i è uguale a 1";
        break;
    case 2:
        echo "i è uguale a 2";
        break;
    default:
       echo "i non è uguale a 0, 1 o 2";
}
?>
]]>
   </programlisting>
  </informalexample>
  <note>
   <simpara>
    Più case <literal>default</literal> genereranno un errore
    <constant>E_COMPILE_ERROR</constant>.
   </simpara>
  </note>
  <note>
   <simpara>
    Tecnicamente il case <literal>default</literal> può essere elencato
    in qualsiasi ordine. Verrà utilizzato solo se nessun altro case corrisponde.
    Tuttavia, per convenzione è preferibile posizionarlo alla fine come
    ultimo ramo.
   </simpara>
  </note>
 </para>
 <para>
  Se nessun ramo <literal>case</literal> corrisponde e non c'è un ramo <literal>default</literal>,
  nessun codice verrà eseguito, come se nessuna istruzione <literal>if</literal> fosse vera.
 </para>
 <para>
  Un valore di case può essere dato come espressione. Tuttavia, quell'espressione verrà
  valutata da sola e poi confrontata debolmente con il valore dello switch. Ciò significa
  che non può essere utilizzata per valutazioni complesse del valore dello switch. Ad esempio:
  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
$target = 1;
$start = 3;

switch ($target) {
    case $start - 1:
        print "A";
        break;
    case $start - 2:
        print "B";
        break;
    case $start - 3:
        print "C";
        break;
    case $start - 4:
        print "D";
        break;
}

// Stampa "B"
?>
]]>
   </programlisting>
  </informalexample>
 </para>
 <para>
  Per confronti più complessi, il valore &true; può essere utilizzato come valore dello switch.
  Oppure, in alternativa, blocchi <literal>if</literal>-<literal>else</literal> al posto di <literal>switch</literal>.
  <informalexample>
   <programlisting role="php">
    <![CDATA[
<?php
$offset = 1;
$start = 3;

switch (true) {
    case $start - $offset === 1:
        print "A";
        break;
    case $start - $offset === 2:
        print "B";
        break;
    case $start - $offset === 3:
        print "C";
        break;
    case $start - $offset === 4:
        print "D";
        break;
}

// Stampa "B"
?>
]]>
   </programlisting>
  </informalexample>
 </para>
 <para>
  La sintassi alternativa per le strutture di controllo è supportata con
  gli switch. Per maggiori informazioni, consultare <link
  linkend="control-structures.alternative-syntax">Sintassi alternativa
  per le strutture di controllo</link>.
  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
switch ($i):
    case 0:
        echo "i è uguale a 0";
        break;
    case 1:
        echo "i è uguale a 1";
        break;
    case 2:
        echo "i è uguale a 2";
        break;
    default:
        echo "i non è uguale a 0, 1 o 2";
endswitch;
?>
]]>
   </programlisting>
  </informalexample>
 </para>
 <para>
  È possibile usare un punto e virgola al posto dei due punti dopo un case come:
  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
switch($beer)
{
    case 'tuborg';
    case 'carlsberg';
    case 'stella';
    case 'heineken';
        echo 'Good choice';
        break;
    default;
        echo 'Please make a new selection...';
        break;
}
?>
]]>
   </programlisting>
  </informalexample>
 </para>

 <sect2 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member>&match;</member>
   </simplelist>
  </para>
 </sect2>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
