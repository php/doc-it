<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: b67451f6fb5aa8602d88fb8680c581f79b76655c Maintainer: lucalzetta Status: ready -->
<!-- $Revision$ -->

<sect1 xml:id="migration56.incompatible">
 <title>Cambiamenti retroincompatibili</title>
 <simpara>
  Sebbene gran parte del codice di PHP 5 possa lavorare
  senza modifiche, è necessario rilevare alcuni
  cambiamenti non compatibili con le versioni
  precedenti:
 </simpara>

 <sect2 xml:id="migration56.incompatible.array-keys">
  <title>Le chiavi di un array non possono essere 
  sovrascritte quando si definisce un array come proprietà
  di una classe attraverso un array literal</title>

  <para>
   Precedentemente, gli array dichiarati come proprietà 
   di una classe che mescolavano chiavi esplicite ed
   implicite potevano avere degli elementi che venivano
   sovrascritti senza preavviso se una chiave esplicita aveva 
   la stessa sequenz di una implicita. Ad esempio:
  </para>

  <informalexample>
   <programlisting role="php">
<![CDATA[
<?php
class C {
    const ONE = 1;
    public $array = [
        self::ONE => 'foo',
        'bar',
        'quux',
    ];
}

var_dump((new C)->array);
?>
]]>
   </programlisting>
   &example.outputs.55;
   <screen>
<![CDATA[
array(2) {
  [0]=>
  string(3) "bar"
  [1]=>
  string(4) "quux"
}

]]>
   </screen>
   &example.outputs.56;
   <screen>
<![CDATA[
array(3) {
  [1]=>
  string(3) "foo"
  [2]=>
  string(3) "bar"
  [3]=>
  string(4) "quux"
}
]]>
   </screen>
  </informalexample>
 </sect2>

 <sect2 xml:id="migration56.incompatible.json-decode">
  <title>Rigore di <function>json_decode</function></title>

  <para>
   <function>json_decode</function> ora rifiuta non-lowercase
   varianti di JSON literals <literal>true</literal>, 
   <literal>false</literal> e <literal>null</literal>
   in ogni caso, come dalla specifica di JSON e imposta,
   in accordo con questa un  <function>json_last_error</function>.
   Precedentemente gli input di <function>json_decode</function>
   che consistevano di uno di questi valori in upper 
   o mixed case erano accettati.
  </para>

  <para>
   Questi cambianti hanno effetto solo nei casi in
   cui JSON non validi siano passati a <function>json_decode</function>: 
   Gli input JSON validi non subiscono cambiamenti
   e continueranno ad essere processati normalmente.
  </para>
 </sect2>

 <sect2 xml:id="migration56.incompatible.peer-verification">
  <title>Stream wrappers ora verificano i certificati peer e i nomi host di default quando si usano SSL/TLS</title>

  &migration56.openssl.peer-verification;
 </sect2>

 <sect2 xml:id="migration56.incompatible.gmp">
  <title><link linkend="book.gmp">GMP</link>le risorse ora sono oggetti</title>

  <para>
   <link linkend="book.gmp">GMP</link>Le risorse ora sono oggett.
   Le API funzionali implementate nelle estensioni
   di GMP non sono state modificate e il codice si può
   eseguire senza modifiche se esso non controlla esplicitamente 
   una risorsa usando <function>is_resource</function> o simili.
  </para>
 </sect2>

 <sect2 xml:id="migration56.incompatible.mcrypt">
  <title><link linkend="book.mcrypt">Mcrypt</link>Le funzioni ora richiedono chiavi valide e IVs</title>

  <para>
   <function>mcrypt_encrypt</function>, <function>mcrypt_decrypt</function>,
   <function>mcrypt_cbc</function>, <function>mcrypt_cfb</function>,
   <function>mcrypt_ecb</function>, <function>mcrypt_generic</function> e
   <function>mcrypt_ofb</function> non accetteranno più chiavi o  IVs 
   di dimensioni arbitrarie, e modalità di block cipher che richiedono
   IVs ora falliranno se non è stato caricato un IVs valido.
  </para>
 </sect2>
 
 <sect2 xml:id="migration56.incompatible.curl">
  <title><link linkend="book.curl">cURL</link> file uploads</title>

  <para>
   L' upload di file usando al sintassi @file ora richiede
   l'impostazione di CURLOPT_SAFE_UPLOAD a &false;.
   <classname>CURLFile</classname> può essere usato in alternativa.
  </para>
 </sect2>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
